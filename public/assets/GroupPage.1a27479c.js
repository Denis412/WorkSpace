import{Q as I}from"./QPage.9ea044d5.js";import{b as _,B as k,g as U,d as B,E as N}from"./queries.03807985.js";import{r as S,a as v,m as b,X as h,q as s,p as n,y,x as q,T as r,Y as z,n as w,v as g,z as F,aj as $}from"./index.6ff5d8ca.js";import{u as E,Q as G,a as C,b as P,_ as A}from"./MainTable.6c54b9be.js";import{Q as D,a as f}from"./QForm.2eae6df7.js";import{e as T,b as M}from"./stompClient.86405047.js";import"./QItemSection.81b963b0.js";import"./scroll.ff30d200.js";import"./QItem.9c099e63.js";function R(){return{required:u=>u&&u.length>0||"\u042D\u0442\u043E \u043F\u043E\u043B\u0435 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C!"}}B(M);const{refetch:X}=_(U,{group_id:"1"}),{mutate:Y}=k(T),H=()=>{},J=async(u,i,m)=>{const{data:l}=await Y({input:{name:u.first_name,surname:u.last_name,email:u.email,page_group_id:i}});return await X({group_id:m}),l},K={groupCreate:H,userInvite:J},L={__name:"InviteUserForm",props:{pageId:String,groupId:String},setup(u){const i=u,m=E(),l=S(!1),t=S({email:"",first_name:"",last_name:""}),d=v(()=>i.groupId),{required:p}=R(),c=async()=>{try{await K.userInvite(t.value,i.pageId,d.value),t.value.first_name="",t.value.last_name="",t.value.email="",m.notify({type:"positive",message:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D"})}catch(o){console.log(o)}};return(o,e)=>(b(),h(z,null,[s(q,{onClick:e[0]||(e[0]=a=>l.value=!0),color:"primary"},{default:n(()=>[y("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430")]),_:1}),s(P,{modelValue:l.value,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value=a)},{default:n(()=>[s(G,null,{default:n(()=>[s(C,{class:"text-h6 text-center"},{default:n(()=>[y(" \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430 ")]),_:1}),s(C,{class:"q-pt-none"},{default:n(()=>[s(D,{onSubmit:c},{default:n(()=>[s(f,{modelValue:t.value.email,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.email=a),filled:"",type:"email",label:"\u041F\u043E\u0447\u0442\u0430","lazy-rules":"",rules:[r(p)]},null,8,["modelValue","rules"]),s(f,{modelValue:t.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.first_name=a),filled:"",label:"\u0418\u043C\u044F","lazy-rules":"",rules:[r(p)]},null,8,["modelValue","rules"]),s(f,{modelValue:t.value.last_name,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.last_name=a),filled:"",label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F","lazy-rules":"",rules:[r(p)]},null,8,["modelValue","rules"]),s(q,{class:"w-100p",color:"primary",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},O={class:"text-h3 text-center"},W={class:"flex"},ne={__name:"GroupPage",setup(u){const m=$().params.id,{result:l}=_(N,{id:m}),t=v(()=>{var o,e;return(e=(o=l.value)==null?void 0:o.page)==null?void 0:e.object.id}),{result:d,loading:p}=_(U,{group_id:t}),c=v(()=>{var a;const o=["\u0418\u043C\u044F","\u0424\u0430\u043C\u0438\u043B\u0438\u044F","Email"],e=(a=l.value)==null?void 0:a.page.title;return e==="\u041E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0435"?o.push("\u041C\u043E\u0434\u0443\u043B\u0438"):e==="\u0418\u0441\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u0438"&&o.push("\u0417\u0430\u0434\u0430\u0447\u0438"),o});return(o,e)=>r(p)?(b(),w(I,{key:0,class:"flex text-h4 items-center justify-center"},{default:n(()=>[y(" \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430... ")]),_:1})):(b(),w(I,{key:1,class:"q-pa-md"},{default:n(()=>{var a,V,x,Q,j;return[g("div",null,[g("section",O,F((a=r(l))==null?void 0:a.page.title),1),g("div",W,[s(L,{"page-id":(V=r(l))==null?void 0:V.page.id,"group-id":(x=r(l))==null?void 0:x.page.object.id},null,8,["page-id","group-id"])]),s(A,{class:"w-100p q-my-md",columnNames:r(c),subjects:(j=(Q=r(d))==null?void 0:Q.get_group)==null?void 0:j.subject},null,8,["columnNames","subjects"])])]}),_:1}))}};export{ne as default};
